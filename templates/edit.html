{% extends "base.html" %}
{% block title %}Edit Recipe{% endblock %}
{% block content %}
  <h2>Edit Recipe</h2>

  <form method="post">
    <p>
      <label>Name</label><br>
      <input name="name" value="{{ name }}" required>
    </p>
    <p>
      <label>Ingredients</label><br>
      <textarea name="ingredients" rows="6">{{ ingredients }}</textarea>
    </p>
    <p>
      <label>Method</label><br>
      <textarea name="method" rows="8">{{ method }}</textarea>
    </p>
    <p>
      <label>Image URL</label><br>
      <input name="image_url" value="{{ image_url }}">
    </p>
    <p>
  <label>Recipe URL</label><br>
  <input type="text" name="linked_recipe" value="{{ linked_recipe or '' }}" placeholder="https://example.com">
</p>

<p>
  <label>Notes</label><br>
  <textarea name="notes" rows="4" placeholder="Write any special notes here...">{{ notes or '' }}</textarea>
</p>


    {% set current_tags = (tags or "").split(",") %}
    <h3>Tags</h3>
    <div class="tag-groups">

      <fieldset>
        <legend>Ingredients</legend>
        <div class="tag-box">
          {% for t in ingredient_tags %}
            <label class="tag-pill">
              <input type="checkbox" name="tags" value="{{ t }}"
                     {% if t in current_tags %}checked{% endif %}>
              <span>{{ t }}</span>
            </label>
          {% endfor %}
        </div>
      </fieldset>

      <fieldset>
        <legend>Type</legend>
        <div class="tag-box">
          {% for t in type_tags %}
            <label class="tag-pill">
              <input type="checkbox" name="tags" value="{{ t }}"
                     {% if t in current_tags %}checked{% endif %}>
              <span>{{ t }}</span>
            </label>
          {% endfor %}
        </div>
      </fieldset>

      <fieldset>
        <legend>Other</legend>
        <div class="tag-box">
          {% for t in other_tags %}
            <label class="tag-pill">
              <input type="checkbox" name="tags" value="{{ t }}"
                     {% if t in current_tags %}checked{% endif %}>
              <span>{{ t }}</span>
            </label>
          {% endfor %}
        </div>
      </fieldset>

      <fieldset>
        <legend>Occasion</legend>
        <div class="tag-box">
          {% for t in occasion_tags %}
            <label class="tag-pill">
              <input type="checkbox" name="tags" value="{{ t }}"
                     {% if t in current_tags %}checked{% endif %}>
              <span>{{ t }}</span>
            </label>
          {% endfor %}
        </div>
      </fieldset>
<p>Extra tags (comma-separated):</p>
<input type="text" name="extra_tags" value="{{ extra_tags }}">

    </div>

    <button type="submit">Save Changes</button>
  </form>

  <hr>

  <form method="post" action="/delete/{{ id }}"
        onsubmit="return confirm('Are you sure you want to delete this recipe?');">
    <button type="submit" class="btn btn-danger">üóëÔ∏è Delete Recipe</button>
  </form>

  <p><a href="/recipe/{{ id }}">Cancel</a></p>
{% endblock %}

